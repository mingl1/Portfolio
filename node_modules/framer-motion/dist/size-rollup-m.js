import*as t from"react";import r,{createContext as n,useContext as e,useLayoutEffect as o,useEffect as a,useRef as i,useCallback as s,useMemo as u,forwardRef as l,createElement as c}from"react";var f=function(t,r){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])})(t,r)};var p=function(){return(p=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function d(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)r.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(n[e[o]]=t[e[o]])}return n}var v=function(t){return{isEnabled:function(r){return t.some((function(t){return!!r[t]}))}}},m={measureLayout:v(["layout","layoutId","drag"]),animation:v(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:v(["exit"]),drag:v(["drag","dragControls"]),focus:v(["whileFocus"]),hover:v(["whileHover","onHoverStart","onHoverEnd"]),tap:v(["whileTap","onTap","onTapStart","onTapCancel"]),pan:v(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:v(["whileInView","onViewportEnter","onViewportLeave"])};var y=n({strict:!1}),g=Object.keys(m),h=g.length;var w=n({transformPagePoint:function(t){return t},isStatic:!1}),b=n({});var O=n(null),S="undefined"!=typeof window,x=S?o:a;function j(t,r,n,o){var s=e(y),u=e(b).visualElement,l=e(O),c=i(void 0);o||(o=s.renderer),!c.current&&o&&(c.current=o(t,{visualState:r,parent:u,props:n,presenceId:null==l?void 0:l.id,blockInitialAnimation:!1===(null==l?void 0:l.initial)}));var f=c.current;return x((function(){null==f||f.syncRender()})),a((function(){var t;null===(t=null==f?void 0:f.animationState)||void 0===t||t.animateChanges()})),x((function(){return function(){return null==f?void 0:f.notifyUnmount()}}),[]),f}function E(t){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function P(t){return"string"==typeof t||function(t){return Array.isArray(t)}(t)}function C(t){var r;return"function"==typeof(null===(r=t.animate)||void 0===r?void 0:r.start)||P(t.initial)||P(t.animate)||P(t.whileHover)||P(t.whileDrag)||P(t.whileTap)||P(t.whileFocus)||P(t.exit)}function T(t){var r=function(t,r){if(C(t)){var n=t.initial,e=t.animate;return{initial:!1===n||P(n)?n:void 0,animate:P(e)?e:void 0}}return!1!==t.inherit?r:{}}(t,e(b)),n=r.initial,o=r.animate;return u((function(){return{initial:n,animate:o}}),[V(n),V(o)])}function V(t){return Array.isArray(t)?t.join(" "):t}function k(t){var r=i(null);return null===r.current&&(r.current=t()),r.current}const L="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),A="undefined"!=typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(L()),1/60*1e3);let R=!0,M=!1,B=!1;const D={delta:0,timestamp:0},X=["read","update","preRender","render","postRender"],Y=X.reduce((t,r)=>(t[r]=function(t){let r=[],n=[],e=0,o=!1,a=!1;const i=new WeakSet,s={schedule:(t,a=!1,s=!1)=>{const u=s&&o,l=u?r:n;return a&&i.add(t),-1===l.indexOf(t)&&(l.push(t),u&&o&&(e=r.length)),t},cancel:t=>{const r=n.indexOf(t);-1!==r&&n.splice(r,1),i.delete(t)},process:u=>{if(o)a=!0;else{if(o=!0,[r,n]=[n,r],n.length=0,e=r.length,e)for(let n=0;n<e;n++){const e=r[n];e(u),i.has(e)&&(s.schedule(e),t())}o=!1,a&&(a=!1,s.process(u))}}};return s}(()=>M=!0),t),{});X.reduce((t,r)=>{const n=Y[r];return t[r]=(t,r=!1,e=!1)=>(M||F(),n.schedule(t,r,e)),t},{}),X.reduce((t,r)=>(t[r]=Y[r].cancel,t),{}),X.reduce((t,r)=>(t[r]=()=>Y[r].process(D),t),{});const H=t=>Y[t].process(D),I=t=>{M=!1,D.delta=R?1/60*1e3:Math.max(Math.min(t-D.timestamp,40),1),D.timestamp=t,B=!0,X.forEach(H),B=!1,M&&(R=!1,A(I))},F=()=>{M=!0,R=!0,B||A(I)};const W={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},Z=Object.assign(Object.assign({},W),{transform:(_=0,z=1,t=>Math.max(Math.min(t,z),_))});var _,z;const U=Object.assign(Object.assign({},W),{default:1}),N=t=>({test:r=>function(t){return"string"==typeof t}(r)&&r.endsWith(t)&&1===r.split(" ").length,parse:parseFloat,transform:r=>`${r}${t}`}),K=N("deg"),$=N("%"),q=N("px"),G=Object.assign(Object.assign({},$),{parse:t=>$.parse(t)/100,transform:t=>$.transform(100*t)});var J=function(t){return null!==t&&"object"==typeof t&&t.getVelocity},Q=p(p({},W),{transform:Math.round}),tt={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,size:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,rotate:K,rotateX:K,rotateY:K,rotateZ:K,scale:U,scaleX:U,scaleY:U,scaleZ:U,skew:K,skewX:K,skewY:K,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Z,originX:G,originY:G,originZ:q,zIndex:Q,fillOpacity:Z,strokeOpacity:Z,numOctaves:Q},rt={},nt=["","X","Y","Z"],et=["transformPerspective","x","y","z"];function ot(t,r){return et.indexOf(t)-et.indexOf(r)}["translate","scale","rotate","skew"].forEach((function(t){return nt.forEach((function(r){return et.push(t+r)}))}));var at=new Set(et);function it(t){return at.has(t)}var st=new Set(["originX","originY","originZ"]);function ut(t){return st.has(t)}function lt(t){var r,n=J(t)?t.get():t;return r=n,Boolean(r&&"object"==typeof r&&r.mix&&r.toValue)?n.toValue():n}var ct=!1,ft=1;var pt=n({}),dt=n({});var vt=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}f(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},r.prototype.componentDidUpdate=function(){},r.prototype.updateProps=function(){var t=this.props,r=t.visualElement,n=t.props;r&&r.setProps(n)},r.prototype.render=function(){return this.props.children},r}(r.Component);function mt(r){var n=r.preloadedFeatures,o=r.createVisualElement,a=r.projectionNodeConstructor,i=r.useRender,u=r.useVisualState,c=r.Component;return n&&function(t){for(var r in t)null!==t[r]&&("projectionNodeConstructor"===r?m.projectionNodeConstructor=t[r]:m[r].Component=t[r])}(n),l((function(r,n){var l=function(t){var r,n=t.layoutId,o=null===(r=e(pt))||void 0===r?void 0:r.id;return o&&void 0!==n?o+"-"+n:n}(r);r=p(p({},r),{layoutId:l});var f=e(w),d=null,v=T(r),O=k((function(){if(ct)return ft++})),x=u(r,f.isStatic);return!f.isStatic&&S&&(v.visualElement=j(c,x,p(p({},f),r),o),function(t,r,n,o){var a,i=r.layoutId,s=r.layout,u=r.drag,l=r.dragConstraints,c=r.layoutScroll,f=e(dt);o&&n&&!(null==n?void 0:n.projection)&&(n.projection=new o(t,n.getLatestValues(),null===(a=n.parent)||void 0===a?void 0:a.projection),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(u)||l&&E(l),visualElement:n,scheduleRender:function(){return n.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:f,layoutScroll:c}))}(O,r,v.visualElement,a||m.projectionNodeConstructor),d=function(r,n,o){var a=[];if(e(y),!n)return null;for(var i=0;i<h;i++){var s=g[i],u=m[s],l=u.isEnabled,c=u.Component;l(r)&&c&&a.push(t.createElement(c,p({key:s},r,{visualElement:n})))}return a}(r,v.visualElement)),t.createElement(vt,{visualElement:v.visualElement,props:p(p({},f),r)},d,t.createElement(b.Provider,{value:v},i(c,r,O,function(t,r,n){return s((function(e){var o;e&&(null===(o=t.mount)||void 0===o||o.call(t,e)),r&&(e?r.mount(e):r.unmount()),n&&("function"==typeof n?n(e):E(n)&&(n.current=e))}),[r])}(x,v.visualElement,n),x,f.isStatic)))}))}var yt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function gt(t){return"string"==typeof t&&!t.includes("-")&&!!(yt.indexOf(t)>-1||/[A-Z]/.test(t))}function ht(t,r){var n=r.layout,e=r.layoutId;return it(t)||ut(t)||(n||void 0!==e)&&(!!rt[t]||"opacity"===t)}var wt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function bt(t){return t.startsWith("--")}var Ot=function(t,r){return r&&"number"==typeof t?r.transform(t):t};function St(t,r,n,e){var o,a=t.style,i=t.vars,s=t.transform,u=t.transformKeys,l=t.transformOrigin;u.length=0;var c=!1,f=!1,p=!0;for(var d in r){var v=r[d];if(bt(d))i[d]=v;else{var m=tt[d],y=Ot(v,m);if(it(d)){if(c=!0,s[d]=y,u.push(d),!p)continue;v!==(null!==(o=m.default)&&void 0!==o?o:0)&&(p=!1)}else ut(d)?(l[d]=y,f=!0):a[d]=y}}c?a.transform=function(t,r,n,e){var o=t.transform,a=t.transformKeys,i=r.enableHardwareAcceleration,s=void 0===i||i,u=r.allowTransformNone,l=void 0===u||u,c="";a.sort(ot);for(var f=!1,p=a.length,d=0;d<p;d++){var v=a[d];c+=(wt[v]||v)+"("+o[v]+") ","z"===v&&(f=!0)}return!f&&s?c+="translateZ(0)":c=c.trim(),e?c=e(o,n?"":c):l&&n&&(c="none"),c}(t,n,p,e):e&&(a.transform=e({},"")),f&&(a.transformOrigin=function(t){var r=t.originX,n=void 0===r?"50%":r,e=t.originY,o=void 0===e?"50%":e,a=t.originZ;return n+" "+o+" "+(void 0===a?0:a)}(l))}var xt=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function jt(t,r,n){for(var e in r)J(r[e])||ht(e,n)||(t[e]=r[e])}function Et(t,r,n){var e={};return jt(e,t.style||{},t),Object.assign(e,function(t,r,n){var e=t.transformTemplate;return u((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};St(t,r,{enableHardwareAcceleration:!n},e);var o=t.style;return p(p({},t.vars),o)}),[r])}(t,r,n)),t.transformValues&&(e=t.transformValues(e)),e}function Pt(t,r,n){var e={},o=Et(t,r,n);return Boolean(t.drag)&&(e.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),e.style=o,e}var Ct=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function Tt(t){return Ct.has(t)}var Vt=function(t){return!Tt(t)};try{var kt=require("@emotion/is-prop-valid").default;Vt=function(t){return t.startsWith("on")?!Tt(t):kt(t)}}catch(t){}function Lt(t,r,n){return"string"==typeof t?t:q.transform(r+n*t)}var At={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rt={offset:"strokeDashoffset",array:"strokeDasharray"};function Mt(t,r,n,e){var o=r.attrX,a=r.attrY,i=r.originX,s=r.originY,u=r.pathLength,l=r.pathSpacing,c=void 0===l?1:l,f=r.pathOffset,p=void 0===f?0:f;St(t,d(r,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,e),t.attrs=t.style,t.style={};var v=t.attrs,m=t.style,y=t.dimensions;v.transform&&(y&&(m.transform=v.transform),delete v.transform),y&&(void 0!==i||void 0!==s||m.transform)&&(m.transformOrigin=function(t,r,n){return Lt(r,t.x,t.width)+" "+Lt(n,t.y,t.height)}(y,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==o&&(v.x=o),void 0!==a&&(v.y=a),void 0!==u&&function(t,r,n,e,o){void 0===n&&(n=1),void 0===e&&(e=0),void 0===o&&(o=!0),t.pathLength=1;var a=o?At:Rt;t[a.offset]=q.transform(-e);var i=q.transform(r),s=q.transform(n);t[a.array]=i+" "+s}(v,u,c,p,!1)}var Bt=function(){return p(p({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Dt(t,r){var n=u((function(){var n=Bt();return Mt(n,r,{enableHardwareAcceleration:!1},t.transformTemplate),p(p({},n.attrs),{style:p({},n.style)})}),[r]);if(t.style){var e={};jt(e,t.style,t),n.style=p(p({},e),n.style)}return n}function Xt(t){void 0===t&&(t=!1);return function(r,n,e,o,a,i){var s=a.latestValues,u=(gt(r)?Dt:Pt)(n,s,i),l=function(t,r,n){var e={};for(var o in t)(Vt(o)||!0===n&&Tt(o)||!r&&!Tt(o))&&(e[o]=t[o]);return e}(n,"string"==typeof r,t),f=p(p(p({},l),u),{ref:o});return e&&(f["data-projection-id"]=e),c(r,f)}}var Yt=/([a-z])([A-Z])/g;var Ht=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function It(t,r){for(var n in function(t,r,n,e){var o=r.style,a=r.vars;for(var i in Object.assign(t.style,o,e&&e.getProjectionStyles(n)),a)t.style.setProperty(i,a[i])}(t,r),r.attrs)t.setAttribute(Ht.has(n)?n:n.replace(Yt,"$1-$2").toLowerCase(),r.attrs[n])}function Ft(t){var r=t.style,n={};for(var e in r)(J(r[e])||ht(e,t))&&(n[e]=r[e]);return n}function Wt(t,r,n,e){var o=t.scrapeMotionValuesFromProps,a=t.createRenderState,i=t.onMount,s={latestValues:_t(r,n,e,o),renderState:a()};return i&&(s.mount=function(t){return i(r,t,s)}),s}var Zt=function(t){return function(r,n){var o=e(b),a=e(O);return n?Wt(t,r,o,a):k((function(){return Wt(t,r,o,a)}))}};function _t(t,r,n,e){var o={},a=!1===(null==n?void 0:n.initial),i=e(t);for(var s in i)o[s]=lt(i[s]);var u=t.initial,l=t.animate,c=C(t),f=function(t){return Boolean(C(t)||t.variants)}(t);r&&f&&!c&&!1!==t.inherit&&(null!=u||(u=r.initial),null!=l||(l=r.animate));var p,v=a||!1===u?l:u;!v||"boolean"==typeof v||"object"==typeof(p=v)&&"function"==typeof p.start||(Array.isArray(v)?v:[v]).forEach((function(r){var n=function(t,r,n,e,o){var a;return void 0===e&&(e={}),void 0===o&&(o={}),"function"==typeof r&&(r=r(null!=n?n:t.custom,e,o)),"string"==typeof r&&(r=null===(a=t.variants)||void 0===a?void 0:a[r]),"function"==typeof r&&(r=r(null!=n?n:t.custom,e,o)),r}(t,r);if(n){var e=n.transitionEnd;n.transition;var a=d(n,["transitionEnd","transition"]);for(var i in a)o[i]=a[i];for(var i in e)o[i]=e[i]}}));return o}var zt={useVisualState:Zt({scrapeMotionValuesFromProps:function(t){var r=Ft(t);for(var n in t){if(J(t[n]))r["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return r},createRenderState:Bt,onMount:function(t,r,n){var e=n.renderState,o=n.latestValues;try{e.dimensions="function"==typeof r.getBBox?r.getBBox():r.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}Mt(e,o,{enableHardwareAcceleration:!1},t.transformTemplate),It(r,e)}})},Ut={useVisualState:Zt({scrapeMotionValuesFromProps:Ft,createRenderState:xt})};var Nt=function(t){function r(r,n){return void 0===n&&(n={}),mt(t(r,n))}var n=new Map;return new Proxy(r,{get:function(t,e){return n.has(e)||n.set(e,r(e)),n.get(e)}})}((function(t,r,n,e,o){var a=r.forwardMotionProps,i=void 0!==a&&a,s=gt(t)?zt:Ut;return p(p({},s),{preloadedFeatures:n,useRender:Xt(i),createVisualElement:e,projectionNodeConstructor:o,Component:t})}));export{Nt as m};
